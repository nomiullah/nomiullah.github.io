!function(e){function t(t,a){var n,i,f;n=t.attr("data-type"),i=e.Event("acf_duplicate:"+n),i.destination=a,t.trigger(i),i.isDefaultPrevented()||(c[n]?c[n](t,a):c._default(t,a,n),f=e.Event("acf_duplicated:"+n),f.destination=a,t.trigger(f))}function a(a,n,i){var i=i||"> .acf-field, > .acf-fields > .acf-field",f=a.find(i),c=n.find(i);f.each(function(a,n){return c[a]?e(f[a]).data("type")!==e(c[a]).data("type")?(console.trace("Error: source field type does not match destination field type"),!1):void t(e(f[a]),e(c[a])):(console.trace("Error: source fields do not match destination fields"),!1)})}var n=acf_duplicate_repeater.options,i=e.extend({},acf.fields.repeater),f=e.extend({},acf.fields.flexible_content),c={_default:function(t,a,n){var i=t.find('[type="'+n+'"]');a.find('[type="'+n+'"]').each(function(t,a){e(this).val(e(i[t]).val())})},button_group:function(t,a){var n=a.find('[type="radio"]');t.find('[type="radio"]').each(function(t,a){if(e(a).prop("checked"))return e(n[t]).trigger("click"),!1})},checkbox:function(t,a){var n=a.find('[type="checkbox"]');t.find('[type="checkbox"]').each(function(t,a){e(n[t]).prop("checked",e(a).prop("checked"))})},color_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},file:function(e,t){var a=e.find(".acf-file-uploader"),n=t.find(".acf-file-uploader");c._default(e,t,"hidden"),a.hasClass("has-value")&&(n.find("div").first().html(a.find("div").first().html()),t.find(".acf-file-uploader").addClass("has-value"))},flexible_content:function(t,n){var i="> .acf-input > .acf-flexible-content > .values > .layout";acf.fields.flexible_content.set("$field",n),t.find(i).each(function(t,f){var c,d=e(f);acf.fields.flexible_content.add(d.data("layout")),c=n.find(i).last(),a(e(f),c,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")})},gallery:function(t,a){var n=t.find(".acf-gallery-attachments"),i=a.find(".acf-gallery-attachments"),f=a.find('input[type="hidden"]'),c=f.attr("name")+"[]";n.children().each(function(t,a){$clone=e(a).clone(),$clone.find('[type="hidden"]').attr("name",c),i.append($clone)})},google_map:function(e,t){c._default(e,t,"hidden")},group:function(e,t){a(e,t,"> .acf-input > .acf-table > tbody > .acf-row > .acf-field, > .acf-input > .acf-fields > .acf-field")},image:function(e,t){c._default(e,t,"hidden"),t.find("img").attr("src",e.find("img").attr("src")),e.find(".acf-image-uploader").hasClass("has-value")&&t.find(".acf-image-uploader").addClass("has-value")},link:function(e,t){var a=e.find(".link-node"),n=t.find(".link-node");n.html(a.html()),n.attr("href",a.attr("href")),n.attr("target",a.attr("target")),n.trigger("change")},oembed:function(e,t){t.find('[data-name="search-input"]').val(e.find('[type="hidden"]').val()).trigger("blur")},post_object:function(e,t){c.select(e,t)},radio:function(e,t){c.button_group(e,t),c._default(e,t,"text")},range:function(e,t){c._default(e,t,"range"),c._default(e,t,"number")},relationship:function(t,a){var n=a.find(".values > .list"),i=a.find(".acf-relationship").children('input[type="hidden"]'),f=i.attr("name")+"[]";t.find(".values > .list").children().each(function(t,a){var i=e(a).clone();i.find('[type="hidden"]').attr("name",f),n.append(i)}),i.trigger("change")},repeater:function(t,n){acf.fields.repeater.set("$field",n),t.find("> .acf-input > .acf-repeater > .acf-table > tbody > .acf-row:not(.acf-clone)").each(function(t,n){var i=acf.fields.repeater.add();a(e(n),i,"> .acf-field, > .acf-fields > .acf-field")})},select:function(t,a,n){n=n||" > .acf-input > select";var i=t.find(n),f=a.find(n);1*i.data("ui")&&(f.html(""),i.find("option").each(function(t,a){f.append(e(a).clone())})),$destOpts=f.find("option"),i.find("option").each(function(t,a){e($destOpts[t]).prop("selected",e(a).prop("selected"))})},taxonomy:function(e,t){c.radio(e,t),c.checkbox(e,t),c.select(e,t,"> .acf-input > .acf-taxonomy-field > select")},textarea:function(e,t){t.find("textarea").val(e.find("textarea").val())},time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},true_false:function(e,t){t.find('[type="checkbox"]').prop("checked",e.find('[type="checkbox"]').prop("checked")),t.find('[type="checkbox"]').trigger("change")},user:function(e,t){c.select(e,t)},wysiwyg:function(e,t){var a=function(a,n,i,f){if(f.get(0)===t.get(0)){var c=tinymce.get(e.find("textarea").attr("id"));c&&a.setContent(c.getContent())}};acf.add_action("wysiwyg_tinymce_init",a),t.find("textarea").html(e.find("textarea").html())}};acf.fields.flexible_content=acf.fields.flexible_content.extend({events:{'click [data-name="duplicate-layout"]':"_duplicate"},render:function(){var t;return t=f.render.apply(this,arguments),this.$values.children(".layout").each(function(t,a){e(this).find('[data-name="duplicate-layout"]').length||e(this).find(".acf-fc-layout-controlls").prepend(n.duplicate_flexible_btn)}),t},_duplicate:function(t){var n,i,f,c;f=t.$el.closest(".layout"),i=f.closest(".acf-field"),acf.fields.flexible_content.set("$field",i),acf.fields.flexible_content.add(f.data("layout"),f),c=f.prev(".layout"),a(f,c,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field"),n=e.Event("acf_duplicated_layout"),n.destination=c,f.trigger(n)}}),acf.fields.repeater=acf.fields.repeater.extend({events:{'click a[data-event="duplicate-row"]':"_duplicate"},render:function(){var t;return t=i.render.apply(this,arguments),this.$tbody.children().each(function(t){e(this).find("> td.remove").append(n.duplicate_repeater_btn)}),t},_duplicate:function(t){var n,i,f;t.$el.hasClass("acf-icon")&&(n=t.$el.closest(".acf-row"),i=this.add(n),a(n,i),this.$input.trigger("change"),f=e.Event("acf_duplicated_row"),f.destination=i,n.trigger(f))}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGVhdGVyLWR1cGxpY2F0ZS5qcyJdLCJuYW1lcyI6WyIkIiwiY29weV92YWx1ZSIsIiRzcmMiLCIkZGVzdCIsInR5cGUiLCJjb3B5RXZlbnQiLCJkb25lRXZlbnQiLCJhdHRyIiwiRXZlbnQiLCJkZXN0aW5hdGlvbiIsInRyaWdnZXIiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJjb3B5X3ZhbHVlX2NiIiwiX2RlZmF1bHQiLCJjb3B5X3ZhbHVlcyIsIl9zZWxlY3RvciIsIiRzb3VyY2VzIiwiZmluZCIsIiRkZXN0cyIsImVhY2giLCJpIiwiZWwiLCJkYXRhIiwiY29uc29sZSIsInRyYWNlIiwib3B0aW9ucyIsImFjZl9kdXBsaWNhdGVfcmVwZWF0ZXIiLCJvcmlnX3JlcGVhdGVyIiwiZXh0ZW5kIiwiYWNmIiwiZmllbGRzIiwicmVwZWF0ZXIiLCJvcmlnX2ZsZXhpYmxlX2NvbnRlbnQiLCJmbGV4aWJsZV9jb250ZW50IiwiJHNyY2VzIiwidGhpcyIsInZhbCIsImJ1dHRvbl9ncm91cCIsIiRkZXN0UmFkaW8iLCJwcm9wIiwiY2hlY2tib3giLCIkZGVzdENCIiwiY29sb3JfcGlja2VyIiwiZGF0ZV9waWNrZXIiLCJkYXRlX3RpbWVfcGlja2VyIiwiZmlsZSIsIiRzcmNVcGwiLCIkZGVzdFVwbCIsImhhc0NsYXNzIiwiZmlyc3QiLCJodG1sIiwiYWRkQ2xhc3MiLCJzZWxlY3RvciIsInNldCIsImxheW91dCIsIiRuZXdfbGF5b3V0IiwiJGxheW91dCIsImFkZCIsImxhc3QiLCJnYWxsZXJ5IiwiJHNyY0xpc3QiLCIkZGVzdExpc3QiLCIkaW5wdXQiLCJuYW1lIiwiY2hpbGRyZW4iLCIkY2xvbmUiLCJjbG9uZSIsImFwcGVuZCIsImdvb2dsZV9tYXAiLCJncm91cCIsImltYWdlIiwibGluayIsIiRzcmNOb2RlIiwiJGRlc3ROb2RlIiwib2VtYmVkIiwicG9zdF9vYmplY3QiLCJyYWRpbyIsInJhbmdlIiwicmVsYXRpb25zaGlwIiwicm93IiwiJG5ld19yb3ciLCJzZWxlY3QiLCIkc3JjU2VsZWN0IiwiJGRlc3RTZWxlY3QiLCIkZGVzdE9wdHMiLCJ0YXhvbm9teSIsInRleHRhcmVhIiwidGltZV9waWNrZXIiLCJ0cnVlX2ZhbHNlIiwidXNlciIsInd5c2l3eWciLCJpbml0X2NiIiwiZWQiLCJpZCIsImluaXQiLCIkZmllbGQiLCJnZXQiLCJzcmNFZCIsInRpbnltY2UiLCJzZXRDb250ZW50IiwiZ2V0Q29udGVudCIsImFkZF9hY3Rpb24iLCJldmVudHMiLCJjbGljayBbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXSIsInJlbmRlciIsInJldCIsImFwcGx5IiwiYXJndW1lbnRzIiwiJHZhbHVlcyIsImxlbmd0aCIsInByZXBlbmQiLCJkdXBsaWNhdGVfZmxleGlibGVfYnRuIiwiX2R1cGxpY2F0ZSIsImUiLCJkdXBsaWNhdGVkRXZlbnQiLCIkZWwiLCJjbG9zZXN0IiwicHJldiIsImNsaWNrIGFbZGF0YS1ldmVudD1cImR1cGxpY2F0ZS1yb3dcIl0iLCIkdGJvZHkiLCJkdXBsaWNhdGVfcmVwZWF0ZXJfYnRuIiwiJHNvdXJjZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0ErTVQsUUFBU0MsR0FBWUMsRUFBTUMsR0FDMUIsR0FBSUMsR0FDSEMsRUFDQUMsQ0FFREYsR0FBT0YsRUFBS0ssS0FBSyxhQUVqQkYsRUFBWUwsRUFBRVEsTUFBTyxpQkFBbUJKLEdBQ3hDQyxFQUFVSSxZQUFjTixFQUV4QkQsRUFBS1EsUUFBU0wsR0FHVEEsRUFBVU0sdUJBSVJDLEVBQWVSLEdBSXJCUSxFQUFjUixHQUFPRixFQUFNQyxHQUYzQlMsRUFBY0MsU0FBVVgsRUFBTUMsRUFBT0MsR0FLdENFLEVBQVlOLEVBQUVRLE1BQU8sa0JBQW9CSixHQUN6Q0UsRUFBVUcsWUFBY04sRUFFeEJELEVBQUtRLFFBQVNKLElBV2YsUUFBU1EsR0FBYVosRUFBTUMsRUFBT1ksR0FDbEMsR0FDQ0EsR0FBWUEsR0FBYSwyQ0FDekJDLEVBQVdkLEVBQUtlLEtBQU1GLEdB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KXtcblx0dmFyIG9wdGlvbnMgPSBhY2ZfZHVwbGljYXRlX3JlcGVhdGVyLm9wdGlvbnMsXG5cblx0XHRvcmlnX3JlcGVhdGVyID0gJC5leHRlbmQoIHt9LCBhY2YuZmllbGRzLnJlcGVhdGVyICksXG5cdFx0b3JpZ19mbGV4aWJsZV9jb250ZW50ID0gJC5leHRlbmQoIHt9LCBhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQgKSxcblxuXHRcdC8qKlxuXHRcdCAqXHR2YWx1ZSBjb3B5IGNhbGxiYWNrc1xuXHRcdCAqL1xuXHRcdGNvcHlfdmFsdWVfY2IgPSB7XG5cdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCwgdHlwZSApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRzcmNlcyA9ICRzcmMuZmluZCgnW3R5cGU9XCInK3R5cGUrJ1wiXScpO1xuXHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCInK3R5cGUrJ1wiXScpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdCQodGhpcykudmFsKCAkKCAkc3JjZXNbaV0gKS52YWwoKSApO1xuXHRcdFx0fSk7XG5cblx0XHR9LFxuXHRcdGJ1dHRvbl9ncm91cDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJGRlc3RSYWRpbyA9ICRkZXN0LmZpbmQoJ1t0eXBlPVwicmFkaW9cIl0nKTtcblx0XHRcdCRzcmMuZmluZCgnW3R5cGU9XCJyYWRpb1wiXScpLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0aWYgKCAkKGVsKS5wcm9wKCdjaGVja2VkJykgKSB7XG5cdFx0XHRcdFx0JCggJGRlc3RSYWRpb1tpXSApLnRyaWdnZXIoJ2NsaWNrJyApO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRjaGVja2JveDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJGRlc3RDQiA9ICRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKTtcblx0XHRcdCRzcmMuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0JCggJGRlc3RDQltpXSApLnByb3AoJ2NoZWNrZWQnLCAkKGVsKS5wcm9wKCdjaGVja2VkJykgKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y29sb3JfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdGRhdGVfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdGRhdGVfdGltZV9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ3RleHQnICk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdH0sXG5cdFx0ZmlsZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJHNyY1VwbCA9ICRzcmMuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJyksXG5cdFx0XHRcdCRkZXN0VXBsID0gJGRlc3QuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJyk7XG5cblx0XHRcdC8vIHNldCBoaWRkZW5cblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oICRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXG5cdFx0XHRpZiAoICRzcmNVcGwuaGFzQ2xhc3MoJ2hhcy12YWx1ZScpICkge1xuXHRcdFx0XHQkZGVzdFVwbC5maW5kKCdkaXYnKS5maXJzdCgpLmh0bWwoICRzcmNVcGwuZmluZCgnZGl2JykuZmlyc3QoKS5odG1sKCkgKTtcblx0XHRcdFx0JGRlc3QuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJykuYWRkQ2xhc3MoJ2hhcy12YWx1ZScpXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRmbGV4aWJsZV9jb250ZW50OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cdFx0XHR2YXIgc2VsZWN0b3IgPSAnPiAuYWNmLWlucHV0ID4gLmFjZi1mbGV4aWJsZS1jb250ZW50ID4gLnZhbHVlcyA+IC5sYXlvdXQnO1xuXHRcdFx0YWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LnNldCggJyRmaWVsZCcsICRkZXN0ICk7XG5cblx0XHRcdCRzcmMuZmluZCggc2VsZWN0b3IgKS5lYWNoKGZ1bmN0aW9uKGksbGF5b3V0KXtcblx0XHRcdFx0Ly8gZWFjaCByZXBlYXRlciBlbnRyeS4uLiBmaW5kIGZpZWxkcyBpbiByZXBlYXRlciBlbnRyeVxuXHRcdFx0XHR2YXIgJGxheW91dCA9ICQobGF5b3V0KSxcblx0XHRcdFx0XHQkbmV3X2xheW91dDtcblxuXHRcdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuYWRkKCAkbGF5b3V0LmRhdGEoJ2xheW91dCcpICk7XG5cblx0XHRcdFx0JG5ld19sYXlvdXQgPSAkZGVzdC5maW5kKCBzZWxlY3RvciApLmxhc3QoKTtcblxuXHRcdFx0XHQvLyB0YmwgKyBibG9jayArIHJvd1xuXHRcdFx0XHRjb3B5X3ZhbHVlcyggJChsYXlvdXQpLCAkbmV3X2xheW91dCwgJz4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cblx0XHRcdH0pOyAvLyB0YWJsZVxuXHRcdH0sXG5cdFx0Z2FsbGVyeTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHQvLyBjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0dmFyICRzcmNMaXN0ID0gJHNyYy5maW5kKCcuYWNmLWdhbGxlcnktYXR0YWNobWVudHMnKSxcblx0XHRcdFx0JGRlc3RMaXN0ID0gJGRlc3QuZmluZCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJyksXG5cdFx0XHRcdCRpbnB1dCA9ICRkZXN0LmZpbmQoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0XHRcdFx0bmFtZSA9ICRpbnB1dC5hdHRyKCduYW1lJykgKyAnW10nO1xuXG5cdFx0XHQkc3JjTGlzdC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdCRjbG9uZSA9ICQoZWwpLmNsb25lKCk7XG5cdFx0XHRcdCRjbG9uZS5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLmF0dHIoICduYW1lJywgbmFtZSApO1xuXHRcdFx0XHQkZGVzdExpc3QuYXBwZW5kKCRjbG9uZSk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGdvb2dsZV9tYXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdGdyb3VwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cdFx0XHRjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsICc+IC5hY2YtaW5wdXQgPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1pbnB1dCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cdFx0fSxcblx0XHRpbWFnZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHQvLyBzZXQgaGlkZGVuXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCAkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdCRkZXN0LmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsICRzcmMuZmluZCgnaW1nJykuYXR0cignc3JjJykgKVxuXHRcdFx0aWYgKCAkc3JjLmZpbmQoJy5hY2YtaW1hZ2UtdXBsb2FkZXInKS5oYXNDbGFzcygnaGFzLXZhbHVlJykgKSB7XG5cdFx0XHRcdCRkZXN0LmZpbmQoJy5hY2YtaW1hZ2UtdXBsb2FkZXInKS5hZGRDbGFzcygnaGFzLXZhbHVlJylcblx0XHRcdH1cblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRzcmNOb2RlID0gJHNyYy5maW5kKCcubGluay1ub2RlJyksXG5cdFx0XHRcdCRkZXN0Tm9kZSA9ICRkZXN0LmZpbmQoJy5saW5rLW5vZGUnKTtcblxuXHRcdFx0JGRlc3ROb2RlLmh0bWwoICRzcmNOb2RlLmh0bWwoKSApO1xuXHRcdFx0JGRlc3ROb2RlLmF0dHIoICdocmVmJywgJHNyY05vZGUuYXR0ciggJ2hyZWYnICkgKTtcblx0XHRcdCRkZXN0Tm9kZS5hdHRyKCAndGFyZ2V0JywgJHNyY05vZGUuYXR0ciggJ3RhcmdldCcgKSApO1xuXG5cdFx0XHQkZGVzdE5vZGUudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSxcblx0XHRvZW1iZWQ6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0JGRlc3QuZmluZCgnW2RhdGEtbmFtZT1cInNlYXJjaC1pbnB1dFwiXScpXG5cdFx0XHRcdC52YWwoICRzcmMuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS52YWwoKSApXG5cdFx0XHRcdC50cmlnZ2VyKCdibHVyJyk7XG5cdFx0fSxcblx0XHRwb3N0X29iamVjdDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydzZWxlY3QnXSgkc3JjLCAkZGVzdCApO1xuXHRcdH0sXG5cdFx0cmFkaW86IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnYnV0dG9uX2dyb3VwJ10oJHNyYywgJGRlc3QpO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwndGV4dCcpO1xuXHRcdH0sXG5cdFx0cmFuZ2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwncmFuZ2UnKTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsJ251bWJlcicpO1xuXHRcdH0sXG5cdFx0cmVsYXRpb25zaGlwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdHZhciAkZGVzdExpc3QgPSAkZGVzdC5maW5kKCcudmFsdWVzID4gLmxpc3QnKSxcblx0XHRcdFx0JGlucHV0ID0gJGRlc3QuZmluZCgnLmFjZi1yZWxhdGlvbnNoaXAnKS5jaGlsZHJlbignaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLFxuXHRcdFx0XHRuYW1lID0gJGlucHV0LmF0dHIoJ25hbWUnKSArICdbXSc7XG5cblx0XHRcdCRzcmMuZmluZCgnLnZhbHVlcyA+IC5saXN0JykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHR2YXIgJGNsb25lID0gJChlbCkuY2xvbmUoKTtcblx0XHRcdFx0JGNsb25lLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJykuYXR0ciggJ25hbWUnLCBuYW1lICk7XG5cdFx0XHRcdCRkZXN0TGlzdC5hcHBlbmQoJGNsb25lKTtcblx0XHRcdH0pO1xuXHRcdFx0JGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0sXG5cdFx0cmVwZWF0ZXI6ZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXG5cdFx0XHRhY2YuZmllbGRzLnJlcGVhdGVyLnNldCggJyRmaWVsZCcsICRkZXN0ICk7XG5cdFx0XHQkc3JjLmZpbmQoJz4gLmFjZi1pbnB1dCA+IC5hY2YtcmVwZWF0ZXIgPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdzpub3QoLmFjZi1jbG9uZSknKS5lYWNoKGZ1bmN0aW9uKGkscm93KXtcblx0XHRcdFx0Ly8gZWFjaCByZXBlYXRlciBlbnRyeS4uLiBmaW5kIGZpZWxkcyBpbiByZXBlYXRlciBlbnRyeVxuXHRcdFx0XHR2YXIgJG5ld19yb3cgPSBhY2YuZmllbGRzLnJlcGVhdGVyLmFkZCgpO1xuXG5cdFx0XHRcdGNvcHlfdmFsdWVzKCAkKHJvdyksICRuZXdfcm93LCAnPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cdFx0XHR9KTsgLy8gdGFibGVcblx0XHR9LFxuXHRcdHNlbGVjdDogZnVuY3Rpb24oICRzcmMsICRkZXN0LCBfc2VsZWN0b3IgKSB7IC8vIE9LQVlcblx0XHRcdF9zZWxlY3RvciA9IF9zZWxlY3RvciB8fCAnID4gLmFjZi1pbnB1dCA+IHNlbGVjdCc7XG5cdFx0XHR2YXIgJHNyY1NlbGVjdCA9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHRcdCRkZXN0U2VsZWN0ID0gJGRlc3QuZmluZCggX3NlbGVjdG9yICk7XG5cblx0XHRcdGlmICggJHNyY1NlbGVjdC5kYXRhKCd1aScpICogMSApIHtcblx0XHRcdFx0Ly8gc29ydCAkZGVzdCBsaWtlICRzcmNcblx0XHRcdFx0JGRlc3RTZWxlY3QuaHRtbCgnJyk7XG5cdFx0XHRcdCRzcmNTZWxlY3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbihpLGVsKXtcblx0XHRcdFx0XHQkZGVzdFNlbGVjdC5hcHBlbmQoJChlbCkuY2xvbmUoKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0JGRlc3RPcHRzID0gJGRlc3RTZWxlY3QuZmluZCgnb3B0aW9uJyk7XG5cdFx0XHQkc3JjU2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0XHQkKCAkZGVzdE9wdHNbaV0gKS5wcm9wKCdzZWxlY3RlZCcsICQoZWwpLnByb3AoJ3NlbGVjdGVkJykgKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dGF4b25vbXk6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsncmFkaW8nXSgkc3JjLCAkZGVzdCk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydjaGVja2JveCddKCRzcmMsICRkZXN0KTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ3NlbGVjdCddKCRzcmMsICRkZXN0LCAnPiAuYWNmLWlucHV0ID4gLmFjZi10YXhvbm9teS1maWVsZCA+IHNlbGVjdCcgKTtcblx0XHR9LFxuXHRcdHRleHRhcmVhOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdCRkZXN0LmZpbmQoJ3RleHRhcmVhJykudmFsKCAkc3JjLmZpbmQoJ3RleHRhcmVhJykudmFsKCkgKTtcblx0XHR9LFxuXHRcdHRpbWVfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdHRydWVfZmFsc2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoJ2NoZWNrZWQnLCAkc3JjLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJykgKTtcblx0XHRcdCRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9LFxuXHRcdHVzZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnc2VsZWN0J10oICRzcmMsICRkZXN0ICk7XG5cdFx0fSxcblx0XHR3eXNpd3lnOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIC4uLlxuXHRcdFx0dmFyIGluaXRfY2IgPSBmdW5jdGlvbiggZWQsIGlkLCBpbml0LCAkZmllbGQgKSB7XG5cdFx0XHRcdGlmICggJGZpZWxkLmdldCgwKSA9PT0gJGRlc3QuZ2V0KDApICkge1xuXHRcdFx0XHRcdHZhciBzcmNFZCA9IHRpbnltY2UuZ2V0KCAkc3JjLmZpbmQoJ3RleHRhcmVhJykuYXR0cignaWQnKSApO1xuXHRcdFx0XHRcdGlmICggc3JjRWQgKSB7XG5cdFx0XHRcdFx0XHRlZC5zZXRDb250ZW50KCBzcmNFZC5nZXRDb250ZW50KCkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdC8vXHRhY2YucmVtb3ZlX2FjdGlvbignd3lzaXd5Z190aW55bWNlX2luaXQnLCBpbml0X2NiICk7IC8vIG1obW1tbVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0YWNmLmFkZF9hY3Rpb24oJ3d5c2l3eWdfdGlueW1jZV9pbml0JywgaW5pdF9jYiApO1xuXG5cdFx0XHQkZGVzdC5maW5kKCd0ZXh0YXJlYScpLmh0bWwoICRzcmMuZmluZCgndGV4dGFyZWEnKS5odG1sKCkgKTtcblx0XHR9LFxuXHR9O1xuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgYWNmLWZpZWxkIHRvIGFub3RoZXJcblx0ICpcblx0ICpcdEBwYXJhbSAkc3JjIGpRdWVyeSBvYmplY3QgaG9sZGluZyB0aGUgLmFjZi1maWVsZCBvYmplY3QgdG8gY29weSBmcm9tXG5cdCAqXHRAcGFyYW0gJGRlc3QgalF1ZXJ5IG9iamVjdCBob2xkaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdCB0byBjb3B5IHRvXG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlKCAkc3JjLCAkZGVzdCApIHtcblx0XHR2YXIgdHlwZSxcblx0XHRcdGNvcHlFdmVudCxcblx0XHRcdGRvbmVFdmVudDtcblxuXHRcdHR5cGUgPSAkc3JjLmF0dHIoJ2RhdGEtdHlwZScpO1xuXG5cdFx0Y29weUV2ZW50ID0gJC5FdmVudCggJ2FjZl9kdXBsaWNhdGU6JyArIHR5cGUgKTtcblx0XHRjb3B5RXZlbnQuZGVzdGluYXRpb24gPSAkZGVzdDtcblxuXHRcdCRzcmMudHJpZ2dlciggY29weUV2ZW50ICk7XG5cblx0XHQvLyBhbGxvdyBjYW5jZWxpbmdcblx0XHRpZiAoIGNvcHlFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoICEgY29weV92YWx1ZV9jYlsgdHlwZSBdICkge1xuXHRcdFx0Ly8gRGVmYWx0IGJlaGF2aW91ciBmb3IgdGV4dCwgcmFuZ2UsIHVybCwgbnVtYmVyLFxuXHRcdFx0Y29weV92YWx1ZV9jYi5fZGVmYXVsdCggJHNyYywgJGRlc3QsIHR5cGUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29weV92YWx1ZV9jYlt0eXBlXSggJHNyYywgJGRlc3QgKTtcblx0XHR9XG5cblx0XHRkb25lRXZlbnQgPSAkLkV2ZW50KCAnYWNmX2R1cGxpY2F0ZWQ6JyArIHR5cGUgKTtcblx0XHRkb25lRXZlbnQuZGVzdGluYXRpb24gPSAkZGVzdDtcblxuXHRcdCRzcmMudHJpZ2dlciggZG9uZUV2ZW50ICk7XG5cdH1cblxuXHQvKipcblx0ICpcdENvcHkgdmFsdWVzIGZyb20gb25lIHNldCBvZiBhY2YtZmllbGRzIHRvIGFub3RoZXIuXG5cdCAqXHRJdCBpcyBhc3N1bWVkIHRoYXQgYm90aCAkc3JjIGFkbiAkZGVzdCBoYXZlIGFuIGlkZW50aWNhbFxuXHQgKlxuXHQgKlx0QHBhcmFtICRzcmMgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdHMgdG8gY29weSBmcm9tXG5cdCAqXHRAcGFyYW0gJGRlc3QgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdCB0byBjb3B5IHRvXG5cdCAqXHRAcGFyYW0gX3NlbGVjdG9yIGNzcyBzZWxlY3RvciB0byBzZWxlY3QgLmFjZi1maWVsZHMgaW4gYm90aCAkc3JjIGFuZCAkZGVzdFxuXHQgKi9cblx0ZnVuY3Rpb24gY29weV92YWx1ZXMoICRzcmMsICRkZXN0LCBfc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGZpZWxkX21hcFx0PSB7fSxcblx0XHRcdF9zZWxlY3RvciA9IF9zZWxlY3RvciB8fCAnPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcsXG5cdFx0XHQkc291cmNlc1x0PSAkc3JjLmZpbmQoIF9zZWxlY3RvciApLFxuXHRcdFx0JGRlc3RzXHRcdD0gJGRlc3QuZmluZCggX3NlbGVjdG9yICk7XG5cblx0XHQkc291cmNlcy5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKXtcblx0XHRcdGlmICggISAkZGVzdHNbaV0gKSB7XG5cdFx0XHRcdGNvbnNvbGUudHJhY2UoJ0Vycm9yOiBzb3VyY2UgZmllbGRzIGRvIG5vdCBtYXRjaCBkZXN0aW5hdGlvbiBmaWVsZHMnKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAkKCAkc291cmNlc1tpXSApLmRhdGEoJ3R5cGUnKSAhPT0gJCgkZGVzdHNbaV0pLmRhdGEoJ3R5cGUnKSApIHtcblx0XHRcdFx0Y29uc29sZS50cmFjZSgnRXJyb3I6IHNvdXJjZSBmaWVsZCB0eXBlIGRvZXMgbm90IG1hdGNoIGRlc3RpbmF0aW9uIGZpZWxkIHR5cGUnKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0Y29weV92YWx1ZSggJCggJHNvdXJjZXNbaV0gKSwgJCgkZGVzdHNbaV0pICk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICpcdEV4dGVuZCBhY2YgZmxleGlibGUgY29udGVudCBmaWVsZFxuXHQgKi9cblx0YWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50ID0gYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LmV4dGVuZCh7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nOiAnX2R1cGxpY2F0ZSdcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciByZXQ7XG5cblx0XHRcdHJldCA9IG9yaWdfZmxleGlibGVfY29udGVudC5yZW5kZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHQvLyB1cGRhdGUgb3JkZXIgbnVtYmVyc1xuXHRcdFx0dGhpcy4kdmFsdWVzLmNoaWxkcmVuKCcubGF5b3V0JykuZWFjaChmdW5jdGlvbiggaSwgZWwgKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykuZmluZCgnW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcuYWNmLWZjLWxheW91dC1jb250cm9sbHMnKS5wcmVwZW5kKCBvcHRpb25zLmR1cGxpY2F0ZV9mbGV4aWJsZV9idG4gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRfZHVwbGljYXRlOiBmdW5jdGlvbiggZSApIHtcblx0XHRcdHZhciBsYXlvdXQsXG5cdFx0XHRcdGR1cGxpY2F0ZWRFdmVudCxcblx0XHRcdFx0JGZpZWxkLFxuXHRcdFx0XHQkbGF5b3V0LFxuXHRcdFx0XHQkbmV3X2xheW91dDtcblxuXHRcdFx0Ly8gZ2V0IGxheW91dCB3cmFwcGVyXG5cdFx0XHQkbGF5b3V0ID0gZS4kZWwuY2xvc2VzdCgnLmxheW91dCcpO1xuXG5cdFx0XHQvLyBnZXQgZmxleGlibGVfY29udGVudCBmaWVsZFxuXHRcdFx0JGZpZWxkID0gJGxheW91dC5jbG9zZXN0KCcuYWNmLWZpZWxkJyk7XG5cblx0XHRcdC8vIGFjZiBzZXQgZmllbGQgY29udGVueHRcblx0XHRcdGFjZi5maWVsZHMuZmxleGlibGVfY29udGVudC5zZXQoICckZmllbGQnLCAkZmllbGQgKTtcblxuXHRcdFx0Ly8gYWNmIGFkZCB0YXJnZXQgbGF5b3V0IGJlZm9yZSBzb3VyY2UgbGF5b3V0XG5cdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuYWRkKCAkbGF5b3V0LmRhdGEoJ2xheW91dCcpLCAkbGF5b3V0ICk7XG5cblx0XHRcdC8vIGdldCB0aGUgYWRkZWQgbGF5b3V0XG5cdFx0XHQkbmV3X2xheW91dCA9ICRsYXlvdXQucHJldiggJy5sYXlvdXQnICk7XG5cblx0XHRcdC8vIGNvcHkgdmFsdWVzIGZyb20gc291cmNlIGxheW91dCB0byBkZXN0aW5hdGlvblxuXHRcdFx0Y29weV92YWx1ZXMoICRsYXlvdXQsICRuZXdfbGF5b3V0LCAnPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblxuXHRcdFx0ZHVwbGljYXRlZEV2ZW50ID0gJC5FdmVudCggJ2FjZl9kdXBsaWNhdGVkX2xheW91dCcgKTtcblx0XHRcdGR1cGxpY2F0ZWRFdmVudC5kZXN0aW5hdGlvbiA9ICRuZXdfbGF5b3V0O1xuXG5cdFx0XHQkbGF5b3V0LnRyaWdnZXIoIGR1cGxpY2F0ZWRFdmVudCApO1xuXG5cdFx0fVxuXHR9KTtcblxuXHQvKipcblx0ICpcdEV4dGVuZCBhY2YgZmxleGlibGUgY29udGVudCBmaWVsZFxuXHQgKi9cblx0YWNmLmZpZWxkcy5yZXBlYXRlciA9IGFjZi5maWVsZHMucmVwZWF0ZXIuZXh0ZW5kKHtcblx0XHRldmVudHM6IHtcblx0XHRcdCdjbGljayBhW2RhdGEtZXZlbnQ9XCJkdXBsaWNhdGUtcm93XCJdJzogJ19kdXBsaWNhdGUnXG5cdFx0fSxcblx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgcmV0O1xuXG5cdFx0XHRyZXQgPSBvcmlnX3JlcGVhdGVyLnJlbmRlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGFkZCBkdXBsaWNhdGUgYnRuXG5cdFx0XHR0aGlzLiR0Ym9keS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSl7XG5cdFx0XHRcdCQodGhpcykuZmluZCgnPiB0ZC5yZW1vdmUnKS5hcHBlbmQoIG9wdGlvbnMuZHVwbGljYXRlX3JlcGVhdGVyX2J0biApO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRfZHVwbGljYXRlOiBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0dmFyICRzb3VyY2UsICRkZXN0LCBkdXBsaWNhdGVkRXZlbnQ7XG5cblx0XHRcdC8vIGdldCBzb3VyY2Ugcm93XG5cdFx0XHRpZiggZS4kZWwuaGFzQ2xhc3MoJ2FjZi1pY29uJykgKSB7XG5cdFx0XHRcdCRzb3VyY2UgPSBlLiRlbC5jbG9zZXN0KCcuYWNmLXJvdycpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Ly8gYWRkIGRlc3RpbmF0aW9uIHJvd1xuXHRcdFx0JGRlc3QgPSB0aGlzLmFkZCggJHNvdXJjZSApOyAvLyBhZGQgYmVmb3JlIHNvdXJjZSFcblxuXHRcdFx0Ly8gY29weSB2YWx1ZXMgZnJvbSBzb3VyY2Ugcm93IHRvIGRlc3RpbmF0aW9uXG5cdFx0XHRjb3B5X3ZhbHVlcyggJHNvdXJjZSwgJGRlc3QgKTtcblxuXHRcdFx0dGhpcy4kaW5wdXQudHJpZ2dlcignY2hhbmdlJyk7XG5cblx0XHRcdGR1cGxpY2F0ZWRFdmVudCA9ICQuRXZlbnQoICdhY2ZfZHVwbGljYXRlZF9yb3cnICk7XG5cdFx0XHRkdXBsaWNhdGVkRXZlbnQuZGVzdGluYXRpb24gPSAkZGVzdDtcblxuXHRcdFx0JHNvdXJjZS50cmlnZ2VyKCBkdXBsaWNhdGVkRXZlbnQgKTtcblxuXHRcdH0sXG5cdH0pO1xuXG5cbn0pKGpRdWVyeSlcbiJdfQ==
